{"version":3,"sources":["images/tick.svg","components/applicationSummary.js","components/signature.js","components/spinner.js","components/pendingTask.js","appReducer.js","lib.js","services.js","App.js","index.js"],"names":["module","exports","__webpack_require__","p","ApplicationSummary","props","ratingYear","Date","getFullYear","_props$application","application","full_name","occupation","address","ratesBill","noOfDependants","spouse_or_partner","total_income","react_default","a","createElement","Fragment","className","onClick","onNext","Signature","_useState","useState","_useState2","Object","slicedToArray","error","setError","_useState3","_useState4","sigCanvas","setSigCanvas","hideBackgroundImage","document","getElementsByClassName","style","cssText","querySelector","useEffect","onBegin","name","back","isEmpty","next","signature","toDataURL","nextButtonLabel","title","subheading","react_signature_pad_wrapper_es","ref","penColor","canvasProps","redrawOnResize","declaration","signature_DeclarationApplicant","data","signature_DeclarationWitness","witness","DeclarationApplicant","DeclarationWitness","date","toLocaleDateString","weekday","year","month","day","location","Spinner","message","PendingTask","task","errorTitle","pending","spinner_Spinner","start","appReducer","state","action","type","objectSpread","token","currentScreen","signatureApplicant","signatureWitness","readyToSubmit","Error","initialState","started","result","reducer","concat","usePendingFetch","func","deps","_useReducer","useReducer","_useReducer2","dispatch","mounted","_ref","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","sent","t0","stop","apply","this","arguments","useAsyncRun","asyncTask","onResult","useFetchApplication","response","json","fetch","abrupt","attributes","fields","total_rates","dependants","income","moved_within_rating_year","useSubmitApplication","_callee2","_context2","signatures","image","role","method","mode","cache","credentials","headers","Content-Type","redirect","referrer","body","JSON","stringify","then","status","statusText","App","URLSearchParams","window","search","get","decodedToken","base64Url","split","base64","decodeURIComponent","atob","map","c","charCodeAt","toString","slice","join","parse","parseJwt","console","log","fetchTask","submitTask","pendingTask_PendingTask","applicationSummary_ApplicationSummary","signature_Signature","src","tick","alt","ReactDOM","render","src_App","getElementById"],"mappings":"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","file":"static/js/main.20b54ed8.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/tick.12268824.svg\";","import React from 'react';\nimport PropTypes from 'prop-types';\n\nexport const ApplicationSummary = (props) => {\n    let ratingYear = new Date().getFullYear() - 1;\n    let taxYear = (new Date().getFullYear() - 2) + '/' + (new Date().getFullYear() - 1);\n\n    let {\n        full_name,\n        occupation,\n        address,\n        ratesBill,\n        noOfDependants,\n        spouse_or_partner,\n        total_income} = props.application;\n\n    return (\n        <>\n            <div className=\"controlsBackground\">\n                <div className=\"controls\">\n                    <button className='next' onClick={props.onNext}>NEXT</button>\n                </div>\n            </div>\n            <div className=\"text-content\">\n                <h1>Application summary</h1>\n                <p className=\"summary\">\n                    Please check these details for your rebate claim.\n                </p>\n\n                <p>My name is <strong>{full_name}</strong> and my occupation is <strong>{occupation}</strong>.\n                </p>\n\n                <p>My address is <strong>{address}</strong> and I lived here on 1 July {ratingYear}.\n                    I have not moved within this rating year.</p>\n\n                <p>My {ratingYear} rates bill (including water) is <strong>${ratesBill}</strong>.</p>\n\n                <p>I have <strong>{noOfDependants}</strong> dependants.</p>\n\n                {spouse_or_partner ?\n                <p>\n                    Our combined income is <strong>${total_income}</strong>.\n                </p>\n                    :\n                <p>My income is <strong>${total_income}</strong>.</p>\n                }\n            </div>\n        </>\n    )\n};\n\nApplicationSummary.propTypes = {\n    application: PropTypes.shape({\n        full_name: PropTypes.string.isRequired,\n        occupation: PropTypes.string.isRequired,\n        address: PropTypes.string.isRequired,\n        ratesBill: PropTypes.string.isRequired,\n        noOfDependants: PropTypes.string.isRequired,\n        spouse_or_partner: PropTypes.bool.isRequired,\n        total_income: PropTypes.number.isRequired,\n    })\n};","import React, { useState, useEffect } from 'react';\nimport SignaturePad from 'react-signature-pad-wrapper';\nimport PropTypes from \"prop-types\";\n\nexport const Signature = (props) => {\n    const [error, setError] = useState(false);\n    const [sigCanvas, setSigCanvas] = useState(null);\n\n    const onNext = () => {\n        if (sigCanvas.isEmpty()) {\n            setError(true);\n            document.querySelector('.signature').className = 'signature error';\n        } else {\n            setError(false);\n            props.next({signature: sigCanvas.toDataURL()});\n        }\n    };\n\n    // workaround, SignaturePad react component doesn't set onBegin on sigCanvas\n    useEffect(() => {\n        if (sigCanvas) {\n            sigCanvas.onBegin = hideBackgroundImage;\n        }\n    }, [sigCanvas]);\n\n    function hideBackgroundImage() {\n        setError(false);\n        document.getElementsByClassName(\n            'sigBgImage')[0].style.cssText=\"visibility: hidden; opacity: 0;transition: visibility 0s .35s, opacity .35s linear;\";\n        document.querySelector('.signature').className = 'signature';\n    }\n\n    function showBackgroundImage() {\n        document.getElementsByClassName(\n            'sigBgImage')[0].style.cssText=\"visibility: default; opacity: 1;transition: visibility 0s .35s, opacity .35s linear\";\n    }\n\n    return (\n        <>\n            <div className=\"controlsBackground\">\n                <div className=\"controls\">\n                    <button className='back' name=\"sign\" onClick={props.back}>GO BACK</button>\n                    <button\n                        className='next'\n                        name=\"sign\"\n                        onClick={onNext}>{props.nextButtonLabel}</button>\n                </div>\n            </div>\n\n            <div className=\"text-content\">\n                <h1>{props.title}</h1>\n                <p className=\"summary\">{props.subheading}</p>\n\n                <div className='signature'>\n                    <div className=\"wrap-signature-canvas\">\n                        { error && <p className=\"signature__error-msg\"><span>Please sign before you proceed</span></p>}\n                        <span className=\"sigBgImage\"></span>\n                        <SignaturePad\n                            ref={(ref) => setSigCanvas(ref)}\n                            penColor='#369'\n                            canvasProps={{className: 'sigCanvas'}}\n                            redrawOnResize={true}\n                        />\n                    </div>\n                    {props.declaration === 'applicant' && <DeclarationApplicant data={props.application}/>}\n                    {props.declaration === 'witness' && <DeclarationWitness data={props.witness}/>}\n                </div>\n            </div>\n        </>\n    )\n};\n\nconst DeclarationApplicant = (props) => {\n    return (\n        <p className=\"signatureSection\">\n            I, <strong>{props.data.full_name}</strong> of <strong>{props.data.address}</strong>,\n            occupation <strong>{props.data.occupation}</strong>, solemnly and sincerely declare that I believe the\n            information I have given on this form is true and correct, and I make this solemn declaration\n            conscientiously believing the same to be true and by virtue of the Oaths and Declarations Act 1957.\n        </p>\n    )\n};\n\nconst DeclarationWitness = (props) => {\n    let options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };\n    let date = new Date().toLocaleDateString('en-NZ', options);\n\n    return (\n        <p className=\"signatureSection\">\n            Declared at <strong>{props.data.location}</strong> this&nbsp;\n            <strong>{date}</strong> before me, <strong>{props.data.name}</strong>, <strong>{props.data.occupation}</strong>.\n        </p>\n    )\n};\n\nSignature.propTypes = {\n    title: PropTypes.string.isRequired,\n    declaration: PropTypes.string.isRequired,\n    application: PropTypes.shape({\n        full_name: PropTypes.string.isRequired,\n        address: PropTypes.string.isRequired,\n        occupation: PropTypes.string.isRequired,\n    })\n};","import React from 'react';\nimport '../App.css';\nimport PropTypes from \"prop-types\";\n\nexport const Spinner = (props) => {\n    return (\n        <div className=\"wrap-system-msg\">\n            <p className=\"system-msg system-msg--processing\">{props.message}</p>\n            <div className=\"sk-fading-circle\">\n                <div className=\"sk-circle1 sk-circle\"></div>\n                <div className=\"sk-circle2 sk-circle\"></div>\n                <div className=\"sk-circle3 sk-circle\"></div>\n                <div className=\"sk-circle4 sk-circle\"></div>\n                <div className=\"sk-circle5 sk-circle\"></div>\n                <div className=\"sk-circle6 sk-circle\"></div>\n                <div className=\"sk-circle7 sk-circle\"></div>\n                <div className=\"sk-circle8 sk-circle\"></div>\n                <div className=\"sk-circle9 sk-circle\"></div>\n                <div className=\"sk-circle10 sk-circle\"></div>\n                <div className=\"sk-circle11 sk-circle\"></div>\n                <div className=\"sk-circle12 sk-circle\"></div>\n            </div>\n        </div>\n    );\n};\n\nSpinner.propTypes = {\n    message: PropTypes.string.isRequired,\n};","import React from 'react';\nimport {Spinner} from \"./spinner\";\nimport PropTypes from \"prop-types\";\n\nexport const PendingTask = (props) => {\n\n    const {task, title, errorTitle} = props;\n\n    return (\n        <>\n            {task.pending &&\n            <Spinner message={title} />}\n\n            {task.error &&\n            <div className=\"wrap-system-msg\">\n                <p className=\"system-msg system-msg--error\">{errorTitle}</p>\n                <button className='next' onClick={() => task.start()}>Try Again</button>\n            </div>}\n        </>\n    );\n};\n\nPendingTask.propTypes = {\n    application: PropTypes.shape({\n        task: PropTypes.string.isRequired,\n        title: PropTypes.string.isRequired,\n        errorTitle: PropTypes.string.isRequired,\n    })\n};","export const appReducer = (state, action) => {\n    switch (action.type) {\n        case 'RECEIVED_TOKEN':\n            return {\n                ...state,\n                token: action.data.token,\n                witness: action.data.witness,\n                currentScreen: 'FETCH-APPLICATION',\n            };\n        case 'FETCHED_APPLICATION':\n            return {\n                ...state,\n                currentScreen: 'CONFIRM-APPLICATION',\n                application: action.application,\n            };\n        case 'CONFIRMED_APPLICATION':\n            return {\n                ...state,\n                currentScreen: 'SIGN-APPLICANT',\n            };\n        case 'APPLICANT_SIGNED':\n            return {\n                ...state,\n                currentScreen: 'SIGN-WITNESS',\n                signatureApplicant: action.signature,\n                signatureWitness: ''\n            };\n        case 'CANCEL_APPLICANT_SIGN':\n            return {\n                ...state,\n                currentScreen: 'CONFIRM-APPLICATION',\n                signatureApplicant: '',\n                signatureWitness: '',\n            };\n        case 'WITNESS_SIGNED':\n            return {\n                ...state,\n                currentScreen: 'SUBMITTING-APPLICATION',\n                signatureWitness: action.signature,\n                readyToSubmit: true\n            };\n        case 'CANCEL_WITNESS_SIGN':\n            return {\n                ...state,\n                currentScreen: 'SIGN-APPLICANT',\n                signatureApplicant: '',\n                signatureWitness: ''\n            };\n        case 'APPLICATION_SUBMITTED':\n            return {\n                ...state,\n                currentScreen: 'THANK-YOU',\n            };\n        default: throw new Error('Unhandled action type ' + action.type);\n    }\n};","import {useReducer, useEffect} from 'react';\n\nimport 'whatwg-fetch';\n\nconst initialState = {\n    started: false,\n    pending: false,\n    error: null,\n    start: null,\n    result: null,\n};\n\nconst reducer = (task, action) => {\n    switch (action.type) {\n        case 'init':\n            return initialState;\n        case 'ready':\n            return {\n                ...task,\n                start: action.start,\n            };\n        case 'start':\n            return {\n                ...task,\n                started: true,\n                pending: true,\n                error: false,\n            };\n        case 'result':\n            return {\n                ...task,\n                pending: false,\n                result: action.result,\n            };\n        case 'error':\n            return {\n                ...task,\n                pending: false,\n                error: action.error,\n            };\n        default:\n            throw new Error(`Unhandled action type: ${action.type}`);\n    }\n};\n\nexport const usePendingFetch = (func, deps) => {\n    const [state, dispatch] = useReducer(reducer, initialState);\n\n    useEffect(() => {\n        let mounted = true;\n\n        const start = async () => {\n            try {\n                if (deps[0]) {\n                    dispatch({type: 'start'});\n                    let result = await func();\n                    if (mounted) {\n                        dispatch({type: 'result', result});\n                    }\n                }\n            } catch (error) {\n                dispatch({type: 'error', error});\n            }\n        };\n\n        if (deps[0]) {\n            dispatch({type: 'ready', start});\n        }\n\n        return () => {\n            dispatch({ type: 'init' });\n            mounted = false;\n        };\n    }, deps);\n\n    return state;\n};\n\nexport const useAsyncRun = (asyncTask, onResult) => {\n    const start = asyncTask && asyncTask.start;\n    const result = asyncTask && asyncTask.result;\n\n    useEffect(() => {\n        if (start) {\n            start();\n        }\n\n        return () => {\n        };\n    }, [start]);\n\n    useEffect(() => {\n        if (result) {\n            onResult(result);\n        }\n    }, [result]);\n};\n\nexport function parseJwt (token) {\n    var base64Url = token.split('.')[1];\n    var base64 = decodeURIComponent(atob(base64Url).split('').map(function(c) {\n        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\n    }).join(''));\n\n    return JSON.parse(base64);\n};\n","import 'whatwg-fetch';\nimport {usePendingFetch, useAsyncRun} from \"./lib\";\n\nexport const useFetchApplication = (token, onResult, deps) => {\n    const task = usePendingFetch(async () => {\n        let response = await fetch(`/api/v1/rebate_forms/?jwt=${token}`);\n        let json = await response.json();\n\n        return {\n            full_name: json.data.attributes.fields.full_name,\n            occupation: json.data.attributes.fields.occupation,\n            address: json.data.attributes.fields.location,\n            ratesBill: json.data.attributes.fields.total_rates,\n            noOfDependants: json.data.attributes.fields.dependants,\n            spouse_or_partner: json.data.attributes.fields.spouse_or_partner === 'yes',\n            total_income: json.data.attributes.fields.income.total_income,\n            moved_within_rating_year: json.data.attributes.fields.moved_within_rating_year === 'yes'\n        };\n    }, deps);\n\n    useAsyncRun(task, onResult);\n\n    return task;\n};\n\nexport const useSubmitApplication = (state, onResult, deps) => {\n    const task = usePendingFetch(async () => {\n        const {\n            token, \n            signatureApplicant, \n            signatureWitness, \n            application, \n            witness\n        } = state;\n\n        let data = {\n            \"data\": {\n                \"token\": `${token}`,\n                \"signatures\": [\n                    {\n                        \"image\": signatureApplicant,\n                        \"name\": application.full_name,\n                        \"role\": application.occupation,\n                        \"type\": \"applicant\"\n                    },\n                    {\n                        \"image\": signatureWitness,\n                        \"name\": witness.name,\n                        \"role\": witness.occupation,\n                        \"type\": \"witness\"\n                    }\n                ]    \n            }\n        };\n\n        let response = await fetch(`/api/v1/rebate_forms/sign`,{\n            method: 'POST', // *GET, POST, PUT, DELETE, etc.\n            mode: 'cors', // no-cors, cors, *same-origin\n            cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n            credentials: 'omit', // include, *same-origin, omit\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            redirect: 'follow', // manual, *follow, error\n            referrer: 'no-referrer', // no-referrer, *client\n            body: JSON.stringify(data), // body data type must match \"Content-Type\" header\n        }).then((response) => {\n            if (response.status >= 200 && response.status < 300) {\n                return response;\n            } else {\n                let error = new Error(response.statusText);\n                error.response = response;\n                throw error;\n            }\n        });\n\n        return await response.json();\n    }, deps);\n\n    useAsyncRun(task, onResult);\n\n    return task;\n};\n","import React from 'react';\nimport {useReducer, useEffect} from 'react';\n\nimport {ApplicationSummary} from \"./components/applicationSummary\";\nimport {Signature} from \"./components/signature\";\nimport {PendingTask} from \"./components/pendingTask\";\n\nimport {appReducer} from './appReducer';\nimport {useFetchApplication, useSubmitApplication} from './services';\nimport {parseJwt} from './lib';\n\nimport './App.css';\nimport tick from './images/tick.svg';\n\n\nfunction App() {\n    const [state, dispatch] = useReducer(appReducer, {});\n\n    useEffect(() => {\n        let urlParams = new URLSearchParams(window.location.search);\n        let token = urlParams.get('t');\n\n        try {\n            let decodedToken = parseJwt(token);\n            dispatch({type: 'RECEIVED_TOKEN', data: {token, witness: decodedToken.witness}});\n        } catch (error) {\n            console.log(error);\n        }\n    }, []);\n\n    const fetchTask = useFetchApplication(state.token, (result) => {\n        dispatch({type: 'FETCHED_APPLICATION', application: result})\n    }, [state.token]);\n\n    const submitTask = useSubmitApplication(state, () => {\n        dispatch({type: 'APPLICATION_SUBMITTED'});\n    }, [state.readyToSubmit]);\n\n    return (\n        <div className=\"App\">\n            <header>\n                <h2>Rates Rebate 2018/2019</h2>\n            </header>\n\n            <div className=\"content\">\n                <PendingTask\n                    task={fetchTask}\n                    title=\"Retrieving application...\"\n                    errorTitle=\"Error while retrieving application\"\n                />\n\n                <PendingTask\n                    task={submitTask}\n                    title=\"Submitting application...\"\n                    errorTitle=\"Error while submitting application\"\n                />\n\n                {state.currentScreen === 'CONFIRM-APPLICATION' &&\n                <ApplicationSummary\n                    application={state.application}\n                    onNext={() => dispatch({type: 'CONFIRMED_APPLICATION'})}\n                />}\n\n                {state.currentScreen === 'SIGN-APPLICANT' &&\n                <Signature\n                    declaration=\"applicant\"\n                    nextButtonLabel=\"NEXT\"\n                    application={state.application}\n                    title=\"Applicant signature\"\n                    subheading=\"Please sign to complete your application\"\n                    next={(data) => dispatch({type: 'APPLICANT_SIGNED', signature: data.signature})}\n                    back={() => dispatch({type: 'CANCEL_APPLICANT_SIGN'})}\n                />}\n\n                {state.currentScreen === 'SIGN-WITNESS' &&\n                <Signature\n                    declaration=\"witness\"\n                    nextButtonLabel=\"SUBMIT\"\n                    application={state.application}\n                    witness={state.witness}\n                    title=\"Witness signature\"\n                    subheading=\"Signature of person authorised to witness this declaration\"\n                    next={(data) => dispatch({type: 'WITNESS_SIGNED', signature: data.signature})}\n                    back={() => dispatch({type: 'CANCEL_WITNESS_SIGN'})}\n                />}\n\n                {state.currentScreen === 'THANK-YOU' &&\n                <div className=\"endScreen\">\n                    <h1>Thank you</h1>\n                    <p className=\"summary\">\n                        This declaration is now complete and ready to be processed.\n                    </p>\n                    <img src={tick} alt=\"tick\" className=\"img-tick\"></img>\n                </div>}\n            </div>\n        </div>\n    );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}