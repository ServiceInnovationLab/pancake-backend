{"version":3,"sources":["images/tick.svg","lib.js","components/applicationSummary.js","components/signature.js","components/spinner.js","components/pendingTask.js","appReducer.js","services.js","App.js","index.js"],"names":["module","exports","__webpack_require__","p","initialState","started","pending","error","start","result","reducer","task","action","type","Object","objectSpread","Error","concat","usePendingFetch","func","deps","_useReducer","useReducer","_useReducer2","slicedToArray","state","dispatch","useEffect","mounted","_ref","asyncToGenerator","regenerator_default","a","mark","_callee","wrap","_context","prev","next","sent","t0","stop","apply","this","arguments","useAsyncRun","asyncTask","onResult","formatDollars","amount","currency","length","undefined","decimalCount","decimal","thousands","Math","abs","isNaN","negativeSign","i","parseInt","Number","toFixed","toString","j","digits","slice","substr","replace","e","ApplicationSummary","props","ratingYear","Date","getFullYear","taxYear","extraClassNextButton","_props$application","application","full_name","occupation","address","ratesBill","noOfDependants","spouse_or_partner","total_income","lived_in_property_1_July","moved_within_rating_year","income_less_than_5k","total_income_formatted","ratesBill_formatted","react_default","createElement","Fragment","className","onClick","onNext","Signature","_useState","useState","_useState2","setError","_useState3","_useState4","sigCanvas","setSigCanvas","extraClassBackButton","hideBackgroundImage","document","getElementsByClassName","style","cssText","querySelector","onBegin","name","back","isEmpty","signature","toDataURL","nextButtonLabel","title","subheading","react_signature_pad_wrapper_es","ref","penColor","canvasProps","redrawOnResize","declaration","signature_DeclarationApplicant","data","signature_DeclarationWitness","witness","DeclarationApplicant","DeclarationWitness","date","toLocaleDateString","weekday","year","month","day","location","Spinner","message","PendingTask","errorTitle","spinner_Spinner","appReducer","token","currentScreen","signatureApplicant","signatureWitness","readyToSubmit","useFetchApplication","response","json","fields","fetch","attributes","abrupt","total_rates","dependants","income","useSubmitApplication","_callee2","_context2","signatures","image","role","method","mode","cache","credentials","headers","Content-Type","redirect","referrer","body","JSON","stringify","then","status","statusText","App","URLSearchParams","window","search","get","decodedToken","base64Url","split","base64","decodeURIComponent","atob","map","c","charCodeAt","join","parse","parseJwt","console","log","fetchTask","submitTask","pendingTask_PendingTask","applicationSummary_ApplicationSummary","signature_Signature","src","tick","alt","ReactDOM","render","src_App","getElementById"],"mappings":"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","file":"static/js/main.d20f4836.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/tick.12268824.svg\";","import {useReducer, useEffect} from 'react';\n\nimport 'whatwg-fetch';\n\nconst initialState = {\n    started: false,\n    pending: false,\n    error: null,\n    start: null,\n    result: null,\n};\n\nconst reducer = (task, action) => {\n    switch (action.type) {\n        case 'init':\n            return initialState;\n        case 'ready':\n            return {\n                ...task,\n                start: action.start,\n            };\n        case 'start':\n            return {\n                ...task,\n                started: true,\n                pending: true,\n                error: false,\n            };\n        case 'result':\n            return {\n                ...task,\n                pending: false,\n                result: action.result,\n            };\n        case 'error':\n            return {\n                ...task,\n                pending: false,\n                error: action.error,\n            };\n        default:\n            throw new Error(`Unhandled action type: ${action.type}`);\n    }\n};\n\nexport const usePendingFetch = (func, deps) => {\n    const [state, dispatch] = useReducer(reducer, initialState);\n\n    useEffect(() => {\n        let mounted = true;\n\n        const start = async () => {\n            try {\n                if (deps[0]) {\n                    dispatch({type: 'start'});\n                    let result = await func();\n                    if (mounted) {\n                        dispatch({type: 'result', result});\n                    }\n                }\n            } catch (error) {\n                dispatch({type: 'error', error});\n            }\n        };\n\n        if (deps[0]) {\n            dispatch({type: 'ready', start});\n        }\n\n        return () => {\n            dispatch({ type: 'init' });\n            mounted = false;\n        };\n    }, deps);\n\n    return state;\n};\n\nexport const useAsyncRun = (asyncTask, onResult) => {\n    const start = asyncTask && asyncTask.start;\n    const result = asyncTask && asyncTask.result;\n\n    useEffect(() => {\n        if (start) {\n            start();\n        }\n\n        return () => {\n        };\n    }, [start]);\n\n    useEffect(() => {\n        if (result) {\n            onResult(result);\n        }\n    }, [result]);\n};\n\nexport function parseJwt (token) {\n    let base64Url = token.split('.')[1];\n    let base64 = decodeURIComponent(atob(base64Url).split('').map(function(c) {\n        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\n    }).join(''));\n\n    return JSON.parse(base64);\n}\n\n\nexport function formatDollars(amount, currency = '$', decimalCount = 2, decimal = \".\", thousands = \",\") {\n    if (typeof amount === 'undefined') {\n        return '$0.00';\n    }\n\n    try {\n        decimalCount = Math.abs(decimalCount);\n        decimalCount = isNaN(decimalCount) ? 2 : decimalCount;\n\n        const negativeSign = amount < 0 ? \"-\" : \"\";\n\n        let i = parseInt(amount = Math.abs(Number(amount) || 0).toFixed(decimalCount)).toString();\n        let j = (i.length > 3) ? i.length % 3 : 0;\n\n        let digits = (decimalCount ? decimal + Math.abs(amount - i).toFixed(decimalCount).slice(2) : \"\");\n        if (amount - i === 0) {\n            digits = '';\n        }\n\n        return currency + negativeSign +\n            (j ? i.substr(0, j) + thousands : '') +\n            i.substr(j).replace(/(\\d{3})(?=\\d)/g, \"$1\" + thousands) + digits;\n    } catch (e) {\n        return amount;\n    }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {formatDollars} from \"../lib\";\n\nexport const ApplicationSummary = (props) => {\n    let ratingYear = new Date().getFullYear() - 1;\n    let taxYear = (new Date().getFullYear() - 2) + '/' + (new Date().getFullYear() - 1);\n\n    let {extraClassNextButton} = props;\n    let {\n        full_name,\n        occupation,\n        address,\n        ratesBill,\n        noOfDependants,\n        spouse_or_partner,\n        total_income,\n        lived_in_property_1_July,\n        moved_within_rating_year,\n        income_less_than_5k\n    } = props.application;\n\n    let total_income_formatted = formatDollars(total_income);\n    let ratesBill_formatted = formatDollars(ratesBill);\n\n    return (\n        <>\n            <div className=\"controlsBackground\">\n                <div className=\"controls\">\n                    <button className={\"next \" + extraClassNextButton} onClick={props.onNext}>NEXT</button>\n                </div>\n            </div>\n            <div className=\"text-content\">\n                <h1>Application summary</h1>\n                <p className=\"summary\">\n                    Please check these details for your rebate claim.\n                </p>\n\n                <p>My name is <strong>{full_name}</strong> and my occupation is <strong>{occupation}</strong>.\n                </p>\n\n                <p>\n                    My address is <strong>{address}</strong> and\n                    {lived_in_property_1_July ? ' I lived here on' : ' I have not lived here'}  1 July {ratingYear}.\n                    {moved_within_rating_year ? ' I have moved ' : ' I have not moved'} within this rating year.\n                </p>\n\n                <p>My {ratingYear} rates bill (including water) is <strong>{ratesBill_formatted}</strong>.</p>\n\n                <p>I have <strong>{noOfDependants}</strong> dependants.</p>\n\n                {spouse_or_partner ?\n                <p>\n                    Our combined income (before tax) for the {taxYear} tax year is <strong>{total_income_formatted}</strong>.\n                </p>\n                    :\n                <p>My income (before tax) for the {taxYear} tax year is <strong>{total_income_formatted}</strong>.</p>\n                }\n                {income_less_than_5k && <p>\n                    I supported myself on less than $5,000 by {income_less_than_5k}\n                </p>}\n            </div>\n        </>\n    )\n};\n\nApplicationSummary.propTypes = {\n    application: PropTypes.shape({\n        full_name: PropTypes.string.isRequired,\n        occupation: PropTypes.string.isRequired,\n        income_less_than_5k: PropTypes.string.isRequired,\n        address: PropTypes.string.isRequired,\n        ratesBill: PropTypes.string.isRequired,\n        noOfDependants: PropTypes.string.isRequired,\n        spouse_or_partner: PropTypes.bool.isRequired,\n        total_income: PropTypes.number.isRequired,\n        moved_within_rating_year: PropTypes.bool.isRequired,\n        lived_in_property_1_July: PropTypes.bool.isRequired,\n    })\n};","import React, { useState, useEffect } from 'react';\nimport SignaturePad from 'react-signature-pad-wrapper';\nimport PropTypes from \"prop-types\";\n\nexport const Signature = (props) => {\n    const [error, setError] = useState(false);\n    const [sigCanvas, setSigCanvas] = useState(null);\n    const {extraClassBackButton, extraClassNextButton} = props;\n\n    const onNext = () => {\n        if (sigCanvas.isEmpty()) {\n            setError(true);\n            document.querySelector('.signature').className = 'signature error';\n        } else {\n            setError(false);\n            props.next({signature: sigCanvas.toDataURL()});\n        }\n    };\n\n    // workaround, SignaturePad react component doesn't set onBegin on sigCanvas\n    useEffect(() => {\n        if (sigCanvas) {\n            sigCanvas.onBegin = hideBackgroundImage;\n        }\n    }, [sigCanvas]);\n\n    function hideBackgroundImage() {\n        setError(false);\n        document.getElementsByClassName(\n            'sigBgImage')[0].style.cssText=\"visibility: hidden; opacity: 0;transition: visibility 0s .35s, opacity .35s linear;\";\n        document.querySelector('.signature').className = 'signature';\n    }\n\n    function showBackgroundImage() {\n        document.getElementsByClassName(\n            'sigBgImage')[0].style.cssText=\"visibility: default; opacity: 1;transition: visibility 0s .35s, opacity .35s linear\";\n    }\n\n    return (\n        <>\n            <div className=\"controlsBackground\">\n                <div className=\"controls\">\n                    <button\n                        className={\"back \" + extraClassBackButton}\n                        name=\"sign\"\n                        onClick={props.back}>GO BACK</button>\n\n                    <button\n                        className={\"next \" + extraClassNextButton}\n                        name=\"sign\"\n                        onClick={onNext}>{props.nextButtonLabel}</button>\n                </div>\n            </div>\n\n            <div className=\"text-content\">\n                <h1>{props.title}</h1>\n                <p className=\"summary\">{props.subheading}</p>\n\n                <div className='signature'>\n                    <div className=\"wrap-signature-canvas\">\n                        { error &&\n                        <p className=\"signature__error-msg ga-error-sigwrite\">\n                            <span>Please sign before you proceed</span>\n                        </p>}\n\n                        <span className=\"sigBgImage\"></span>\n\n                        <SignaturePad\n                            ref={(ref) => setSigCanvas(ref)}\n                            penColor='#369'\n                            canvasProps={{className: 'sigCanvas'}}\n                            redrawOnResize={true}\n                        />\n                    </div>\n                    {props.declaration === 'applicant' && <DeclarationApplicant data={props.application}/>}\n                    {props.declaration === 'witness' && <DeclarationWitness data={props.witness}/>}\n                </div>\n            </div>\n        </>\n    )\n};\n\nconst DeclarationApplicant = (props) => {\n    return (\n        <p className=\"signatureSection\">\n            I, <strong>{props.data.full_name}</strong> of <strong>{props.data.address}</strong>,\n            occupation <strong>{props.data.occupation}</strong>, solemnly and sincerely declare that I believe the\n            information I have given on this form is true and correct, and I make this solemn declaration\n            conscientiously believing the same to be true and by virtue of the Oaths and Declarations Act 1957.\n        </p>\n    )\n};\n\nconst DeclarationWitness = (props) => {\n    let options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };\n    let date = new Date().toLocaleDateString('en-NZ', options);\n\n    return (\n        <p className=\"signatureSection\">\n            Declared at <strong>{props.data.location}</strong> this&nbsp;\n            <strong>{date}</strong> before me, <strong>{props.data.name}</strong>, <strong>{props.data.occupation}</strong>.\n        </p>\n    )\n};\n\nSignature.propTypes = {\n    title: PropTypes.string.isRequired,\n    declaration: PropTypes.string.isRequired,\n    application: PropTypes.shape({\n        full_name: PropTypes.string.isRequired,\n        address: PropTypes.string.isRequired,\n        occupation: PropTypes.string.isRequired,\n    })\n};","import React from 'react';\nimport '../App.css';\nimport PropTypes from \"prop-types\";\n\nexport const Spinner = (props) => {\n    return (\n        <div className=\"wrap-system-msg\">\n            <p className=\"system-msg system-msg--processing\">{props.message}</p>\n            <div className=\"sk-fading-circle\">\n                <div className=\"sk-circle1 sk-circle\"></div>\n                <div className=\"sk-circle2 sk-circle\"></div>\n                <div className=\"sk-circle3 sk-circle\"></div>\n                <div className=\"sk-circle4 sk-circle\"></div>\n                <div className=\"sk-circle5 sk-circle\"></div>\n                <div className=\"sk-circle6 sk-circle\"></div>\n                <div className=\"sk-circle7 sk-circle\"></div>\n                <div className=\"sk-circle8 sk-circle\"></div>\n                <div className=\"sk-circle9 sk-circle\"></div>\n                <div className=\"sk-circle10 sk-circle\"></div>\n                <div className=\"sk-circle11 sk-circle\"></div>\n                <div className=\"sk-circle12 sk-circle\"></div>\n            </div>\n        </div>\n    );\n};\n\nSpinner.propTypes = {\n    message: PropTypes.string.isRequired,\n};","import React from 'react';\nimport {Spinner} from \"./spinner\";\nimport PropTypes from \"prop-types\";\n\nexport const PendingTask = (props) => {\n\n    const {task, title, errorTitle, extraClassNextButton} = props;\n\n    return (\n        <>\n            {task.pending &&\n            <Spinner message={title} />}\n\n            {task.error &&\n            <div className=\"wrap-system-msg\">\n                <p className=\"system-msg system-msg--error\">{errorTitle}</p>\n                <button className={\"next \" + extraClassNextButton} onClick={() => task.start()}>Try Again</button>\n            </div>}\n        </>\n    );\n};\n\nPendingTask.propTypes = {\n    application: PropTypes.shape({\n        task: PropTypes.string.isRequired,\n        title: PropTypes.string.isRequired,\n        errorTitle: PropTypes.string.isRequired,\n    })\n};","export const appReducer = (state, action) => {\n    switch (action.type) {\n        case 'RECEIVED_TOKEN':\n            return {\n                ...state,\n                token: action.data.token,\n                witness: action.data.witness,\n                currentScreen: 'FETCH-APPLICATION',\n            };\n        case 'FETCHED_APPLICATION':\n            return {\n                ...state,\n                currentScreen: 'CONFIRM-APPLICATION',\n                application: action.application,\n            };\n        case 'CONFIRMED_APPLICATION':\n            return {\n                ...state,\n                currentScreen: 'SIGN-APPLICANT',\n            };\n        case 'APPLICANT_SIGNED':\n            return {\n                ...state,\n                currentScreen: 'SIGN-WITNESS',\n                signatureApplicant: action.signature,\n                signatureWitness: ''\n            };\n        case 'CANCEL_APPLICANT_SIGN':\n            return {\n                ...state,\n                currentScreen: 'CONFIRM-APPLICATION',\n                signatureApplicant: '',\n                signatureWitness: '',\n            };\n        case 'WITNESS_SIGNED':\n            return {\n                ...state,\n                currentScreen: 'SUBMITTING-APPLICATION',\n                signatureWitness: action.signature,\n                readyToSubmit: true\n            };\n        case 'CANCEL_WITNESS_SIGN':\n            return {\n                ...state,\n                currentScreen: 'SIGN-APPLICANT',\n                signatureApplicant: '',\n                signatureWitness: ''\n            };\n        case 'APPLICATION_SUBMITTED':\n            return {\n                ...state,\n                currentScreen: 'THANK-YOU',\n            };\n        default: throw new Error('Unhandled action type ' + action.type);\n    }\n};","import 'whatwg-fetch';\nimport {usePendingFetch, useAsyncRun} from \"./lib\";\n\nexport const useFetchApplication = (token, onResult, deps) => {\n    const task = usePendingFetch(async () => {\n        let response = await fetch(`/api/v1/rebate_forms/?jwt=${token}`);\n        let json = await response.json();\n        let fields = json.data.attributes.fields;\n\n        return {\n            full_name: fields.full_name,\n            occupation: fields.occupation,\n            address: fields.location,\n            ratesBill: fields.total_rates,\n            noOfDependants: fields.dependants,\n            spouse_or_partner: (typeof fields.spouse_or_partner !== 'undefined') ? fields.spouse_or_partner === 'yes' : false,\n            total_income: fields.income.total_income,\n            income_less_than_5k: fields.income_less_than_5k,\n            moved_within_rating_year: (typeof fields.moved_within_rating_year !== 'undefined') ? fields.moved_within_rating_year === 'yes' : false,\n            lived_in_property_1_July: (typeof fields.lived_in_property_1_July !== 'undefined') ? fields.lived_in_property_1_July === 'yes' : false,\n        };\n    }, deps);\n\n    useAsyncRun(task, onResult);\n\n    return task;\n};\n\nexport const useSubmitApplication = (state, onResult, deps) => {\n    const task = usePendingFetch(async () => {\n        const {\n            token,\n            signatureApplicant,\n            signatureWitness,\n            application,\n            witness\n        } = state;\n\n        let data = {\n            \"data\": {\n                \"token\": `${token}`,\n                \"signatures\": [\n                    {\n                        \"image\": signatureApplicant,\n                        \"name\": application.full_name,\n                        \"role\": application.occupation,\n                        \"type\": \"applicant\"\n                    },\n                    {\n                        \"image\": signatureWitness,\n                        \"name\": witness.name,\n                        \"role\": witness.occupation,\n                        \"type\": \"witness\"\n                    }\n                ]\n            }\n        };\n\n        let response = await fetch(`/api/v1/signatures`,{\n            method: 'POST',\n            mode: 'cors',\n            cache: 'no-cache',\n            credentials: 'omit',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            redirect: 'follow',\n            referrer: 'no-referrer',\n            body: JSON.stringify(data),\n        }).then((response) => {\n            if (response.status >= 200 && response.status < 300) {\n                return response;\n            } else {\n                let error = new Error(response.statusText);\n                error.response = response;\n                throw error;\n            }\n        });\n\n        return await response.json();\n    }, deps);\n\n    useAsyncRun(task, onResult);\n\n    return task;\n};\n","import React from 'react';\nimport {useReducer, useEffect} from 'react';\n\nimport {ApplicationSummary} from \"./components/applicationSummary\";\nimport {Signature} from \"./components/signature\";\nimport {PendingTask} from \"./components/pendingTask\";\n\nimport {appReducer} from './appReducer';\nimport {useFetchApplication, useSubmitApplication} from './services';\nimport {parseJwt} from './lib';\n\nimport './App.css';\nimport tick from './images/tick.svg';\n\n\nfunction App() {\n    const [state, dispatch] = useReducer(appReducer, {});\n\n    useEffect(() => {\n        let urlParams = new URLSearchParams(window.location.search);\n        let token = urlParams.get('t');\n\n        try {\n            let decodedToken = parseJwt(token);\n            dispatch({type: 'RECEIVED_TOKEN', data: {token, witness: decodedToken.witness}});\n        } catch (error) {\n            console.log(error);\n        }\n    }, []);\n\n    const fetchTask = useFetchApplication(state.token, (result) => {\n        dispatch({type: 'FETCHED_APPLICATION', application: result})\n    }, [state.token]);\n\n    const submitTask = useSubmitApplication(state, () => {\n        dispatch({type: 'APPLICATION_SUBMITTED'});\n    }, [state.readyToSubmit]);\n\n    return (\n        <div className=\"App\">\n            <header>\n                <h2>Rates Rebate 2018/2019</h2>\n            </header>\n\n            <div className=\"content\">\n                <PendingTask\n                    task={fetchTask}\n                    title=\"Retrieving application...\"\n                    errorTitle=\"Error while retrieving application\"\n                    extraClassNextButton=\"ga-error-appget\"\n                />\n\n                <PendingTask\n                    task={submitTask}\n                    title=\"Submitting application...\"\n                    errorTitle=\"Error while submitting application\"\n                    extraClassNextButton=\"ga-error-sigsend\"\n                />\n\n                {state.currentScreen === 'CONFIRM-APPLICATION' &&\n                <ApplicationSummary\n                    application={state.application}\n                    onNext={() => dispatch({type: 'CONFIRMED_APPLICATION'})}\n                    extraClassNextButton=\"ga-appsum-next\"\n                />}\n\n                {state.currentScreen === 'SIGN-APPLICANT' &&\n                <Signature\n                    declaration=\"applicant\"\n                    nextButtonLabel=\"NEXT\"\n                    application={state.application}\n                    title=\"Applicant signature\"\n                    subheading=\"Please sign to complete your application\"\n                    next={(data) => dispatch({type: 'APPLICANT_SIGNED', signature: data.signature})}\n                    back={() => dispatch({type: 'CANCEL_APPLICANT_SIGN'})}\n                    extraClassBackButton=\"ga-appsig-goback\"\n                    extraClassNextButton=\"ga-appsig-next\"\n                />}\n\n                {state.currentScreen === 'SIGN-WITNESS' &&\n                <Signature\n                    declaration=\"witness\"\n                    nextButtonLabel=\"SUBMIT\"\n                    application={state.application}\n                    witness={state.witness}\n                    title=\"Witness signature\"\n                    subheading=\"Signature of person authorised to witness this declaration\"\n                    next={(data) => dispatch({type: 'WITNESS_SIGNED', signature: data.signature})}\n                    back={() => dispatch({type: 'CANCEL_WITNESS_SIGN'})}\n                    extraClassBackButton=\"ga-witsig-goback\"\n                    extraClassNextButton=\"ga-witsig-submit\"\n                />}\n\n                {state.currentScreen === 'THANK-YOU' &&\n                <div className=\"endScreen ga-deccomplete\">\n                    <h1>Thank you</h1>\n                    <p className=\"summary\">\n                        This declaration is now complete and ready to be processed.\n                    </p>\n                    <img src={tick} alt=\"tick\" className=\"img-tick\"></img>\n                </div>}\n            </div>\n        </div>\n    );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}